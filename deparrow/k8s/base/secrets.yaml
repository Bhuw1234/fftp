# =============================================================================
# DEparrow Secrets - Base Configuration
# =============================================================================
# 
# IMPORTANT: This file provides placeholder secrets for local development ONLY.
# 
# For production deployments, use one of the following:
#   1. External Secrets Operator (recommended) - see external-secret.yaml
#   2. Sealed Secrets - https://github.com/bitnami-labs/sealed-secrets
#   3. HashiCorp Vault with vault-agent-injector
#   4. Cloud provider secret managers (AWS Secrets Manager, Azure Key Vault, GCP Secret Manager)
#
# NEVER commit real secrets to version control!
#
# Required secrets for production:
#   - DEPARROW_JWT_SECRET: JWT signing key (32+ random characters)
#   - DEPARROW_SECRET_KEY: Application secret key (32+ random characters)
#   - POSTGRES_PASSWORD: Database password
#   - REDIS_PASSWORD: Redis password
#   - GRAFANA_ADMIN_PASSWORD: Grafana admin password
#   - ANTHROPIC_API_KEY: Anthropic API key (optional)
#   - OPENAI_API_KEY: OpenAI API key (optional)
#
# Setup Instructions:
#   Dev:      Use as-is or override with kustomize secretGenerator
#   Staging:  Use External Secrets Operator with staging secret store
#   Prod:     Use External Secrets Operator with production secret store
# =============================================================================

apiVersion: v1
kind: Secret
metadata:
  name: deparrow-secrets
  labels:
    app.kubernetes.io/name: deparrow
    app.kubernetes.io/component: secrets
    app.kubernetes.io/part-of: deparrow-platform
  annotations:
    # Marker for external secrets operator to skip this in production
    secrets.k8s.kubernetes.io/managed: "false"
    deparrow.io/secret-type: "development-placeholder"
type: Opaque
stringData:
  # -------------------------------------------------------------------------
  # JWT Secrets - MUST be changed in production
  # Generate with: openssl rand -base64 32
  # -------------------------------------------------------------------------
  DEPARROW_JWT_SECRET: "dev-jwt-secret-DO-NOT-USE-IN-PRODUCTION"
  DEPARROW_SECRET_KEY: "dev-secret-key-DO-NOT-USE-IN-PRODUCTION"
  
  # -------------------------------------------------------------------------
  # Database Credentials
  # -------------------------------------------------------------------------
  POSTGRES_PASSWORD: "dev-db-password"
  POSTGRES_REPLICATION_PASSWORD: "dev-replication-password"
  
  # -------------------------------------------------------------------------
  # Redis Credentials
  # -------------------------------------------------------------------------
  REDIS_PASSWORD: "dev-redis-password"
  
  # -------------------------------------------------------------------------
  # Grafana Admin Credentials
  # -------------------------------------------------------------------------
  GRAFANA_ADMIN_USER: "admin"
  GRAFANA_ADMIN_PASSWORD: "dev-admin-password"
  
  # -------------------------------------------------------------------------
  # External API Keys (optional - only if using AI features)
  # -------------------------------------------------------------------------
  ANTHROPIC_API_KEY: ""
  OPENAI_API_KEY: ""

---
# PostgreSQL Credentials Secret
# Used by PostgreSQL StatefulSet
apiVersion: v1
kind: Secret
metadata:
  name: postgres-credentials
  labels:
    app.kubernetes.io/name: postgres
    app.kubernetes.io/component: database
    app.kubernetes.io/part-of: deparrow-platform
  annotations:
    deparrow.io/secret-type: "development-placeholder"
type: Opaque
stringData:
  POSTGRES_USER: "deparrow"
  POSTGRES_PASSWORD: "dev-db-password"
  POSTGRES_DB: "deparrow"

---
# Redis Credentials Secret
# Used by Redis deployment
apiVersion: v1
kind: Secret
metadata:
  name: redis-credentials
  labels:
    app.kubernetes.io/name: redis
    app.kubernetes.io/component: cache
    app.kubernetes.io/part-of: deparrow-platform
  annotations:
    deparrow.io/secret-type: "development-placeholder"
type: Opaque
stringData:
  REDIS_PASSWORD: "dev-redis-password"